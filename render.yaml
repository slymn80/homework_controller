services:
  - type: web
    name: homework-controller-api
    env: docker
    plan: starter
    autoDeploy: true
    healthCheckPath: /health
    envVars:
      # 🔐 OpenAI
      - key: OPENAI_API_KEY
        sync: false

      # 🔐 Google Drive kimlik dosyaları
      - key: GOOGLE_SERVICE_ACCOUNT_JSON
        value: creds/service_account.json
      # OAuth kullanıyorsan bunları da aktif et:
      # - key: GOOGLE_OAUTH_CLIENT_SECRET_JSON
      #   value: creds/oauth_client_secret.json
      # - key: GOOGLE_OAUTH_TOKEN_JSON
      #   value: creds/oauth_token.json

      # 🧠 OCR / dosya ayarları
      - key: ALLOWED_EXT
        value: .txt,.docx,.pdf,.jpg,.jpeg,.png
      - key: OCR_LANG
        value: tur+eng

      # 🗂️ Drive klasörleri
      - key: DRIVE_SOURCE_FOLDER_ID
        sync: false
      - key: DRIVE_REPORTS_FOLDER_ID
        sync: false
      - key: DRIVE_BACKUP_FOLDER_ID
        sync: false

      # 📁 Uygulama davranışı
      - key: LOCAL_OUTPUT_DIR
        value: outputs
      - key: REPORT_PREFIX
        value: grading-report
      - key: MAX_FILES_PER_RUN
        value: "0"

    # 📦 Kalıcı disk (raporların tutulduğu dizin)
    disk:
      name: outputs-disk
      mountPath: /app/outputs
      sizeGB: 1
