services:
  - type: web
    name: homework-controller-api
    env: docker
    plan: starter
    autoDeploy: true
    healthCheckPath: /health
    envVars:
      # ğŸ” OpenAI
      - key: OPENAI_API_KEY
        sync: false

      # ğŸ” Google Drive kimlik dosyalarÄ±
      - key: GOOGLE_SERVICE_ACCOUNT_JSON
        value: creds/service_account.json
      # OAuth kullanÄ±yorsan bunlarÄ± da aktif et:
      # - key: GOOGLE_OAUTH_CLIENT_SECRET_JSON
      #   value: creds/oauth_client_secret.json
      # - key: GOOGLE_OAUTH_TOKEN_JSON
      #   value: creds/oauth_token.json

      # ğŸ§  OCR / dosya ayarlarÄ±
      - key: ALLOWED_EXT
        value: .txt,.docx,.pdf,.jpg,.jpeg,.png
      - key: OCR_LANG
        value: tur+eng

      # ğŸ—‚ï¸ Drive klasÃ¶rleri
      - key: DRIVE_SOURCE_FOLDER_ID
        sync: false
      - key: DRIVE_REPORTS_FOLDER_ID
        sync: false
      - key: DRIVE_BACKUP_FOLDER_ID
        sync: false

      # ğŸ“ Uygulama davranÄ±ÅŸÄ±
      - key: LOCAL_OUTPUT_DIR
        value: outputs
      - key: REPORT_PREFIX
        value: grading-report
      - key: MAX_FILES_PER_RUN
        value: "0"

    # ğŸ“¦ KalÄ±cÄ± disk (raporlarÄ±n tutulduÄŸu dizin)
    disk:
      name: outputs-disk
      mountPath: /app/outputs
      sizeGB: 1
